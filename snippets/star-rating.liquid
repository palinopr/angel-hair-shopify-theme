{% comment %}
  Angel Hair Theme - Star Rating Snippet (Matching Store Design)
  
  Usage: {% render 'star-rating', rating: 4.5, count: 25 %}
{% endcomment %}

{%- liquid
  assign rating = rating | default: 5
  assign count = count | default: 0
  assign show_count = show_count | default: true
  
  assign full_stars = rating | floor
  assign half_star = false
  assign rating_decimal = rating | modulo: 1
  if rating_decimal >= 0.5
    assign half_star = true
  endif
  assign empty_stars = 5 | minus: full_stars
  if half_star
    assign empty_stars = empty_stars | minus: 1
  endif
-%}

<div class="star-rating" aria-label="Rating: {{ rating }} out of 5 stars">
  {%- for i in (1..full_stars) -%}
    <svg class="star-rating__star" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
    </svg>
  {%- endfor -%}
  
  {%- if half_star -%}
    <svg class="star-rating__star star-rating__star--half" viewBox="0 0 24 24" aria-hidden="true">
      <defs>
        <linearGradient id="half-star-grad">
          <stop offset="50%" stop-color="#f5a623"/>
          <stop offset="50%" stop-color="#e5e5e5"/>
        </linearGradient>
      </defs>
      <path fill="url(#half-star-grad)" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
    </svg>
  {%- endif -%}
  
  {%- for i in (1..empty_stars) -%}
    <svg class="star-rating__star star-rating__star--empty" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
    </svg>
  {%- endfor -%}
  
  {%- if show_count and count > 0 -%}
    <span class="star-rating__count">({{ count }})</span>
  {%- endif -%}
</div>

<style>
  .star-rating {
    display: inline-flex;
    align-items: center;
    gap: 1px;
  }

  .star-rating__star {
    width: 12px;
    height: 12px;
    fill: #f5a623;
  }

  .star-rating__star--empty {
    fill: #e5e5e5;
  }

  .star-rating__count {
    margin-left: 6px;
    font-size: 12px;
    color: #999;
  }
</style>
